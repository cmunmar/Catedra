{"apartado": "02 - Contenidos Digitales", "titulo": "Manual Servicio Microstrategy: Explotaci\u00f3n de datos (Polidatos)", "enlace": "https://wiki.upv.es/confluence/pages/viewpage.action?pageId=740687882", "subtitulo-1": "Introducci\u00f3n a Polidatos", "contenido-1": "Esto es una peque\u00f1a gu\u00eda para las operaciones m\u00e1s b\u00e1sicas a la hora de usar el producto Web Universal de Microstrategy para poder crear presentaciones vistosas (Dashboards) y poder mostrarlas desde un enlace web de acceso p\u00fablico. Para m\u00e1s informaci\u00f3n del uso de la herramienta, habr\u00e1 que visitar las ayudas que da el fabricante del producto en: https://community.microstrategy.com/ https://www.microstrategy.com/es/services/education", "subtitulo-2": "Entrada a la aplicaci\u00f3n Polidatos", "contenido-2": "La aplicaci\u00f3n viene tal cual la proporciona el fabricante Microstrategy: https://aplicat.upv.es/polidatos  Tras iniciar sesi\u00f3n con nuestro usuario y clave de Microstrategy, aparecen los proyectos de Microstrategy a los que tenemos acceso. En Microstrategy el trabajo se organiza por proyectos, que se corresponde con un \u00e1rea de negocio. Pulsamos sobre el proyecto y ya podemos acceder a los informes. Para m\u00e1s informaci\u00f3n del uso de la herramienta, habr\u00e1 que visitar las ayudas que da el fabricante del producto en: https://community.microstrategy.com/ https://www.microstrategy.com/es/services/education", "subtitulo-3": "Importar datos, crear un informe sobre los datos y publicarlo.", "contenido-3": "Podemos subir datos a nuestro proyecto desde distintos or\u00edgenes. Esta informaci\u00f3n se almacena en lo que Microstrategy llama \u201ccubo inteligente\u201d, que no es m\u00e1s que un archivo de datos en un formato interno de Microstrategy. Para informaci\u00f3n m\u00e1s detallada ver las urls de Microstrategy. A continuaci\u00f3n, veremos los procesos de: Importar datos desde archivo: que nos permite tener nuestros conjuntos de datos organizados en el servidor.Importar datos desde base de datos: que nos permite consultar una tabla en base de datosCrear informes: que usan los datos que hemos importado.Permiso de acceso p\u00fablico: teniendo en cuenta que hemos de dar acceso p\u00fablico tanto a los datos como al informe.", "seccion-3.1": "Importar datos desde archivo", "contenido-3.1": "Esta operaci\u00f3n se realiza para subir los datos al servidor. Una vez subidos siempre est\u00e1n en el servidor y pueden ser usados para nuestros informes. Escogemos la opci\u00f3n \u201cAgregar datos externos\u201d del men\u00fa CREAR:Aparece una ventana donde podemos escoger una amplia variedad de or\u00edgenes. Seleccionaremos a modo de ejemplo \u201cArchivos desde disco\u201d, que es el primero de la esquina superior izquierda:Arrastramos los archivos de datos a la ventana \u201cCargar sus archivos\u201d:Pulsamos el bot\u00f3n \u201cPreparaci\u00f3n de los datos\u201d para guiar a Microstrategy en el proceso de identificar en el archivo los tipos de datos que contiene y as\u00ed incorporarlos adecuadamente para su posterior uso en los informes.En el caso de un archivo Excel, nos preguntara que hojas queremos importar.Microstrategy reconoce los valores num\u00e9ricos como indicadores (valores sobre los que hacer c\u00e1lculos: sumar, multiplicar, hacer medias, etc..) y el resto como atributos (valores por los que agrupar los calcular anteriores, por ejemplo: sumar por concepto, media por mes, etc\u2026)Pulsamos el bot\u00f3n Finalizar si queremos cargar ya los datos del o el bot\u00f3n \u201cGuardar Proceso\u201d si queremos guardar las indicaciones que acabamos de hacer para orientar la incorporaci\u00f3n de los datos de nuestro archivo. En ambos casos, aparecer\u00e1 la ventana \u201cguardar como\u201d donde es importante escoger una ubicaci\u00f3n y darle un nombre:Pulsamos el bot\u00f3n \u201cGuardar\u201d y Microstrategy hace el proceso de importaci\u00f3n del archivo.      ", "seccion-3.2": "Importar datos desde Tabla de base de datos", "contenido-3.2": "Lo primero que haremos ser\u00e1 definir en la base de datos el \u201ccubo\u201d que es la tabla de donde salen los datos. El cubo es una tabla o consulta en donde encontramos todos los atributos y todas las m\u00e9tricas que consulta el informe. Esto recomendamos hacerlo creando una vista en el usuario de base de datos. La vista debe aglutinar todos los datos que consultaremos en el informe. Es preferible una vista para facilitar el posterior mantenimiento, por ejemplo:  Cualquier operaci\u00f3n de limpieza de nulos, preparaci\u00f3n de datos, c\u00e1lculos, etc es conveniente realizarla si es posible en la base de datos a la hora de crear el cubo, puesto que las mismas operaciones ser\u00e1n m\u00e1s dif\u00edciles de hacer en Microstrategy. Por ejemplo, si tenemos un campo fecha y queremos hacer la consulta por mes, es muy recomendable crear el campo mes en la tabla y no en el informe de Microstrategy.  Proponemos usar la siguiente convenci\u00f3n de nombres, para uniformizar los dise\u00f1os de informes: Atributo ( todo aquello por lo que se agrupa en la query ) :La columna se llamara ID_<ATRIBUTO> si es la columna que tiene los valores clave del atributo, p.e., ID_PERSONA es la clave que identifica la personaLa columna se llamara DS_<ATRIBUTO> si tiene valores que son una descripci\u00f3n del atributo y no la clave, p.e., DS_PERSONA, es un descriptor del atributo persona pero no su clave (seria el nombre, alias, etc\u2026)Se deben elegir los nombres bien descriptivos y no caer en ambig\u00fcedades o generalizaciones como fecha, persona, etc.., p.e.:ID_PERSONA_SOLICITANTE.ID_PERSONA_TITULADA.ID_PERSONA_DOCENTE.ID_FECHA_SOLICITUD.ID_FECHA_ACTUIALIZACION. La columna se llamara ID_<ATRIBUTO> si es la columna que tiene los valores clave del atributo, p.e., ID_PERSONA es la clave que identifica la personaLa columna se llamara DS_<ATRIBUTO> si tiene valores que son una descripci\u00f3n del atributo y no la clave, p.e., DS_PERSONA, es un descriptor del atributo persona pero no su clave (seria el nombre, alias, etc\u2026)Se deben elegir los nombres bien descriptivos y no caer en ambig\u00fcedades o generalizaciones como fecha, persona, etc.., p.e.:ID_PERSONA_SOLICITANTE.ID_PERSONA_TITULADA.ID_PERSONA_DOCENTE.ID_FECHA_SOLICITUD.ID_FECHA_ACTUIALIZACION. ID_PERSONA_SOLICITANTE.ID_PERSONA_TITULADA.ID_PERSONA_DOCENTE.ID_FECHA_SOLICITUD.ID_FECHA_ACTUIALIZACION. Este concepto parece que lo hacemos siempre bien con las fechas, es decir, sabemos que el mismo dia puede estar en la columna ID_FECHA_SOLICITUD e ID_FECHA_ACTUALIZACION, pero nos cuesta identificar a veces que la misma persona este en varias columnas. Lo mismo pasa con otros conceptos. Tambi\u00e9n a veces es necesario grabar el mismo dato en dos columnas distintas puesto que podemos requerir hacer agrupaciones desde varios puntos de vista diferentes. Por ejemplo, la misma fecha del mismo evento, lo podemos grabar como: ID_FECHA_SOLICITUDID_FECHA_TRAMITE_BECADe modo que luego tengamos ID_FECHA_TRAMITE_BECA en varias tablas que nos interese unir por la fecha (independientemente del concepto de la fecha) OJO! Con esto por que el nombre ID_FECHA_TRAMITE_BECA se deberia poner unicamente en aquelles tablas que son fechas enlazables. ID_FECHA_SOLICITUDID_FECHA_TRAMITE_BECADe modo que luego tengamos ID_FECHA_TRAMITE_BECA en varias tablas que nos interese unir por la fecha (independientemente del concepto de la fecha) OJO! Con esto por que el nombre ID_FECHA_TRAMITE_BECA se deberia poner unicamente en aquelles tablas que son fechas enlazables. ID_FECHA_SOLICITUDID_FECHA_TRAMITE_BECADe modo que luego tengamos ID_FECHA_TRAMITE_BECA en varias tablas que nos interese unir por la fecha (independientemente del concepto de la fecha) OJO! Con esto por que el nombre ID_FECHA_TRAMITE_BECA se deberia poner unicamente en aquelles tablas que son fechas enlazables. Indicador (todo aquello que se mide en la query):La columna se llamara IND_<nombre_hecho_medido> si es una columna que esta midiendo un hecho, p.e.:IND_JUGADORES_EQUIPO La columna se llamara IND_<nombre_hecho_medido> si es una columna que esta midiendo un hecho, p.e.:IND_JUGADORES_EQUIPO IND_JUGADORES_EQUIPO  IMPORTANTE INDICADORES: Los indicadores tienen dos tipos, agregables y no agregables. Tambi\u00e9n depende de la combinaci\u00f3n de atributos que el recuento de filas puede contabilizar \u00edtems distintos o repetidos, todo depende del nivel al que se consulta, por lo que no siempre por poner la marca de count distint te va a hacer un count distinct y si no , no.  Podemos importar toda la tabla o hacer una consulta. Una consulta es mas interesante puesto que luego las visualizaciones no parece que permitan aplicar bien los filtros, adem\u00e1s se puede cambiar sobre la marcha para a\u00f1adir columnas o darles otro tratamiento.   En la consulta crearemos le campo ID y el campo DESC de esta forma: SELECT\u00a0\"APLICACION_RIOS\u00a0(ID)\",\u00a0\"BD_DESTINO\u00a0(DESC)\",\u00a0\"BD_DESTINO\u00a0(ID)\",\u00a0\u00a0\u00a0\u00a0\"BD_DESTINO_DESARROLLO\u00a0(ID)\",\u00a0\"BD_ORIGEN\u00a0(DESC)\",\u00a0\"BD_ORIGEN\u00a0(ID)\",\u00a0\u00a0\u00a0\u00a0\"BD_ORIGEN_DESARROLLO\u00a0(ID)\",\u00a0\"BDLINK\u00a0(ID)\"\u00a0\u00a0\u00a0,\u00a0\"FECHA_CONSULTA\u00a0(ID)\"\u00a0\u00a0\u00a0,\u00a0to_char(\"FECHA_CONSULTA\u00a0(ID)\",'month\u00a0yyyy')\u00a0\"mes_a\u00f1o_consulta\u00a0(DESC)\"\u00a0\u00a0\u00a0,\u00a0to_char(\"FECHA_CONSULTA\u00a0(ID)\",'mm\u00a0yyyy')\u00a0\"mes_a\u00f1o_consulta\u00a0(ID)\"\u00a0\u00a0\u00a0,\u00a0to_char(\"FECHA_CONSULTA\u00a0(ID)\",'month')\u00a0\"mes_consulta\u00a0(DESC)\"\u00a0\u00a0\u00a0,\u00a0to_char(\"FECHA_CONSULTA\u00a0(ID)\",'mm')\u00a0\"mes_consulta\u00a0(ID)\",\u00a0\u00a0\u00a0\u00a0\"USUARIO_DESTINO\u00a0(ID)\",\u00a0\"USUARIOBD_ORIGEN\u00a0(ID)\"FROM\u00a0DT_CATDBLINKSwhere\u00a0\"USUARIO_DESTINO\u00a0(ID)\"\u00a0=\u00a0'CONCPD'  IMPORTANTE: Todo lo que se desarrolla se queda en el informe y no es reusable en otro informe.", "seccion-3.3": "Crear informe", "contenido-3.3": "Importante: para desarrollar se usa un usuario con permisos de modificaci\u00f3n/creaci\u00f3n de informes que NO es el mismo que se usar\u00e1 para la consulta publica. Para probar los informes, se debe hacer desde UN NAVEGADOR DISTINTO AL QUE ESTAMOS USANDO PARA DESARROLLAR, P.E., si estamos en Chrome > probar desde Mozilla, etc. Esto es por que este navegador tiene la sesi\u00f3n iniciada con las credenciales de desarrollo. (otra opci\u00f3n seria cerrar la sesi\u00f3n cada vez que queremos probar, pero no parece practico)  Si la parte de importar datos ha ido correctamente, nos preguntara si queremos crear informe, documento o tablero (Dashboards):Escogiendo la opci\u00f3n \u201cCrear Tablero\u201d veremos que nuestros datos esta ya incorporado como el conjunto de datos a usar en la parte izquierda del tablero (Dashboards):Y bas\u00e1ndonos en esos datos creamos un tablero y lo guardamos en \u201cInformes Compartidos\u201d:     Siempre podremos crear informes sobre archivos que ya han sido subidos al servidor. Bien r\u00e1pidamente pulsando sobre el mismo cubo de datos:  o bien mediante los pasos siguientes: Pulsando el bot\u00f3n CREAR y seleccionando la opci\u00f3n \u201cNuevo Tablero\u201dEscogiendo la opci\u00f3n \u201cConjunto de datos Existente\u2026\u201dEscogemos el conjunto de datos que nos interesa en nuestro informe:   ", "seccion-3.4": "Permisos de acceso publico", "contenido-3.4": "Hemos de asegurar que el usuario p\u00fablico tiene permisos de acceso: Al informe.a los datos que usa el informe. El primer punto, se realiza haciendo una copia en la carpeta \u201cPUBLICAR\u201d, como puede verse en el apartado Acceso p\u00fablico mediante la carpeta \u201cPublicar\u201d. Si no tenemos acceso al informe, veremos un mensaje como este:  Si no tenemos permiso de acceso a los datos que usa el informe, veremos este error al intentar el acceso p\u00fablico:   En la descripci\u00f3n del error en ingl\u00e9s, vemos que indica que no se tiene acceso al \u201cdataset\u201d, es decir, al conjunto de datos que usa el informe. Para solucionarlo, tenemos que ir al cubo inteligente de Microstrategy que contiene los datos y darles permiso a todos los usuarios: Ir a la carpeta donde hemos ubicado los datos cuando se importaron y sobre el cubo inteligente clic con el bot\u00f3n derecho del rat\u00f3n y escogemos \u201cCompartir...\u201dEn la ventana \u201cPermisos\u201d en la l\u00ednea de abajo donde pone \u201cAgregar:\u201d, pulsamos el bot\u00f3n  :Y en \u201cexplorador de usuario/grupo de usuarios\u201d nos aseguramos que este marcado el grupo \u201cEveryone\u201d y pulsamos el bot\u00f3n ACEPTAR:De nuevo en la ventana \u201cPermisos\u201d en la parte inferior, veremos que se ha incluido \u201cEveryone\u201d en la casilla \u201cAgregar\u201d. Escogemos primero en el desplegable la opci\u00f3n \u201cConsumir\u201d y una vez escogida pulsamos el bot\u00f3n :Si todo ha ido correctamente, tenemos a\u00f1adida en la lista una entrada para el usuario/grupo Everyone con acceso \u201cConsumir\u201d como en la imagen siguiente:Solo nos faltara pulsar el bot\u00f3n ACEPTAR.       Si quisi\u00e9ramos revocar el permiso, en la misma ventana anterior, al pasar el rat\u00f3n aparece un aspita que nos permite eliminar al grupo, como se ve en esta imagen: ", "subtitulo-4": "Herramienta Microstrategy Desktop", "contenido-4": "La herramienta de Microstrategy Desktop permite subir y descargar informes y Dashboards directamente hacia o desde el servidor, pero no disponemos de licencia para usar esa opci\u00f3n. https://www2.microstrategy.com/producthelp/Current/Readme/es-es/content/desktopclient.htm", "seccion-4.1": "Importar un informe creado en Desktop", "contenido-4.1": "S\u00ed que es posible, no obstante, importar un informe creado con Desktop desde Web Universal, para ello: Nos colocamos en la carpeta \u201cMis Informes\u201d.Pulsar el bot\u00f3n CREAR y escoger la opci\u00f3n \u201cCargar archivo de Microstrategy\u201d:Seleccionamos el archivo \u2018.mstr\u2019 que previamente habremos exportado desde desktop:La herramienta procesa el archivo \u2018.mstr\u2019 y lo coloca en la carpeta del servidor \u201cMis informes\u201d.   ", "seccion-4.2": "Exportar a Desktop un informe creado en Web universal", "contenido-4.2": "La herramienta de Microstrategy Desktop permite subir y descargar informes y Dashboards directamente desde el servidor, pero no disponemos de licencia para usar esa opci\u00f3n. Pero s\u00ed que es posible guardar el informe en un archivo \u2018.mstr\u2019 que posteriormente podremos abrir desde un pc que tenga instalado desktop: Desde el informe que queremos exportar a Desktop, pulsamos en el men\u00fa archivo y escogemos la opci\u00f3n \u201cDescargar Tablero\u201dSe abrir\u00e1 una ventana de dialogo donde escogeremos la ubicaci\u00f3n donde dejar el archivo \u2018.mstr\u2019. ", "subtitulo-5": "Acceso p\u00fablico a un informe", "contenido-5": "Los informes que creamos son, en principio, privados, es decir, solo tiene permisos para verlos nuestro usuario de Microstrategy. No obstante, esto puede no ser as\u00ed en las siguientes circunstancias: Que la carpeta donde los creamos este otorgando permisos AUTOMATICAMENTE a otros usuarios en el momento de la creaci\u00f3n del informe. Este es el caso de la carpeta \u201cPUBLICAR\u201d.Que editemos los permisos de acceso al informe y a\u00f1adamos permisos a otros. Esta opci\u00f3n requiere un conocimiento m\u00e1s avanzado de la herramienta, pero esta accesible en cualquier informe pulsando con el bot\u00f3n derecho del rat\u00f3n y escogiendo la opci\u00f3n \u201cCompartir\u2026\u201d. Cuando queremos que el informe sea accesible de forma p\u00fablica mediante una url, hemos de ser cuidadosos a la hora de dar permisos p\u00fablicos al informe, de lo contrario no ir\u00e1. Del mismo modo, no queremos que se acceda de forma p\u00fablica a cosas que no est\u00e1n pensadas para que se acceda de este modo. Por tanto, diferenciaremos dos etapas a la hora de dar acceso p\u00fablico a un informe: Preparar el informe y darle los permisos de acceso p\u00fablico.Construir la URL de acceso p\u00fablico para enlazar desde otras webs.", "seccion-5.1": "Acceso p\u00fablico mediante la carpeta \u201cPublicar\u201d", "contenido-5.1": "Una forma sencilla para empezar con la publicaci\u00f3n de un informe es copiarlo [1] desde la ubicaci\u00f3n donde lo hemos desarrollado a la carpeta \u201cPUBLICAR\u201d que ya est\u00e1 configurada para otorgar el permiso de acceso p\u00fablico. Es importante mantener una copia en privado del informe, para nuestro uso, mantenimiento, inclusi\u00f3n de datos nuevos, etc\u2026 separada de la copia a la que acceden los usuarios de forma p\u00fablica. Esto nos permite trabajar en nuestro informe sin molestar a los usuarios que acceden de forma p\u00fablica.", "seccion-5.2": "Etapa de preparaci\u00f3n del informe", "contenido-5.2": "Estos son los pasos: Navegar hasta la carpeta donde est\u00e1 el informe, por ejemplo, la carpeta \u201cInformes Compartidos\u201d:Sobre el informe, pulsamos con el bot\u00f3n derecho y seleccionamos la opci\u00f3n \u201cCopiar\u2026\u201d (OJO! Es importante escoger COPIAR para que se cree un duplicado del informe en la carpeta de destino) y escogemos la carpeta \u201cPUBLICAR\u201d en la ventana \u201cCopiar Informe: \u2026\u201d:   Tambi\u00e9n podemos escoger el nombre que tendr\u00e1 el archivo. Cuando este rellenado este campo pulsaremos Aceptar en esa ventana y se cerrar\u00e1. Podemos visualizar el nuevo informe dentro de la carpeta PUBLICAR. Si pulsamos sobre el informe y escogemos la opci\u00f3n \u201cCompartir\u2026\u201d podemos comprobar que tiene la marca de que esta otorgado el permiso de acceso al p\u00fablico, como se ve en las figuras siguientes:    Esa marca es la que otorga el permiso de acceso p\u00fablico, si un informe carece de esa marca, no ser\u00e1 visible a trav\u00e9s del acceso p\u00fablico. ", "seccion-5.3": "Etapa de creaci\u00f3n del enlace", "contenido-5.3": "Una vez tenemos creada la copia del informe a la que queremos otorgar acceso p\u00fablico, seguiremos estos pasos para construir la URL de acceso directo desde otras webs. Desde la ubicaci\u00f3n del informe que queremos dar acceso p\u00fablico, pulsamos con el bot\u00f3n derecho y escogemos la opci\u00f3n \u201cPropiedades\u2026\u201d y aparece la figura:En la ventanita \u201cPropiedades\u2026\u201d hemos de copiar la url que indica en el campo \u201cV\u00ednculo:\u201dPara ello, hacemos clic sobre la url con el bot\u00f3n derecho del rat\u00f3n y escogemos la opci\u00f3n \u201cCopiar la direcci\u00f3n de enlace\u201dM\u00e1s o menos la url que hemos copiado debe tener esta pinta:https://aplicat.upv.es/polidatos/servlet/mstrWeb?Server=MSTR.UPV&Project=ASIC&Port=0&evt=3140&src=mstrWeb.3140&documentID=40DD06CC11E9209F00000080EF456574El acceso p\u00fablico se hace cambiando en esa url:El valor del portal de edici\u00f3n de informes (polidatos) por el valor mstrpub y,a\u00f1adir al final \u201c&upvpub&hiddensections=header,path,dockTop,dockLeft,footer\u201d.    El valor del portal de edici\u00f3n de informes (polidatos) por el valor mstrpub y,a\u00f1adir al final \u201c&upvpub&hiddensections=header,path,dockTop,dockLeft,footer\u201d.  Debe quedar as\u00ed: Enlace original que nos da la herramienta WebUniversal: https://aplicat.upv.es/polidatos/servlet/mstrWeb?Server=MSTR.UPV&Project=ASIC&Port=0&evt=3140&src=mstrWeb.3140&documentID=40DD06CC11E9209F00000080EF456574", "subseccion-5.3.1": "Enlace de acceso publico Universal", "contenido-5.3.1": "Partiendo del enlace original que nos da la herramienta WebUniversal: Enlace PUBLICO que podemos usar desde cualquier web para ver el informe (cambiar polidatos por mstrpub): https://aplicat.upv.es/mstrpub/servlet/mstrWeb?Server=MSTR.UPV&Project=ASIC&Port=0&evt=3140&src=mstrWeb.3140&documentID=40DD06CC11E9209F00000080EF456574&upvpub&hiddensections=header,path,dockTop,dockLeft,footer Si probamos el acceso p\u00fablico, comprobaremos que no tenemos las opciones de edici\u00f3n del informe. !OJO! le hemos a\u00f1adido al enlace original que nos da la herramienta WebUniversal, lo siguente: &upvpub&hiddensections=header,path,dockTop,dockLeft,footer &upvpub es obligatorio, pues indica que es un acceso publico sin autenticar &hiddensections es optativo, y es para ocultar encabezado y pie del visualizador webuniversal ( solo muestra la visualizacion de datos ). ", "subseccion-5.3.2": "Enlace de acceso al colectivo de la UPV ( debe estar autenticado en intranet )", "contenido-5.3.2": "Partiendo del enlace original que nos da la herramienta WebUniversal: Enlace PUBLICO que podemos usar desde cualquier web para ver el informe (cambiar polidatos por mstrupvpub): https://aplicat.upv.es/mstrupvpub/servlet/mstrWeb?Server=MSTR.UPV&Project=ASIC&Port=0&evt=3140&src=mstrWeb.3140&documentID=40DD06CC11E9209F00000080EF456574 ", "seccion-5.4": "Enlace desde otra web", "contenido-5.4": "El enlace que hemos construido en la etapa anterior, podemos usarlo directamente, es decir, a ventana completa, o insertarlo en otra p\u00e1gina web de este modo:  <iframe width=\"640\" height=\"480\"src=\"https://aplicat.upv.es/mstrpub/servlet/mstrWeb?Server=MSTR.UPV&Project=ASIC&Port=0&evt=3140&src=mstrWeb.3140&documentID=40DD06CC11E9209F00000080EF456574&upvpub&hiddensections=header,path,dockTop,dockLeft,footer\"> </iframe> "}